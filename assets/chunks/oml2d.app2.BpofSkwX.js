import{d as U,F as G,m as D,l as oe,e as ne,Y as ae,B as le,U as A}from"./index.MTqdyU5I.js";import"./framework.Bna9RZrE.js";var P=Math.pow,u=(i,e,t)=>new Promise((s,r)=>{var o=a=>{try{l(t.next(a))}catch(d){r(d)}},n=a=>{try{l(t.throw(a))}catch(d){r(d)}},l=a=>a.done?s(a.value):Promise.resolve(a.value).then(o,n);l((t=t.apply(i,e)).next())});const $=2,W=2;var C;(i=>{i.supportMoreMaskDivisions=!0,i.setOpacityFromMotion=!1})(C||(C={}));var M;(i=>{i.LOG_LEVEL_VERBOSE=0,i.LOG_LEVEL_WARNING=1,i.LOG_LEVEL_ERROR=2,i.LOG_LEVEL_NONE=999,i.logLevel=i.LOG_LEVEL_WARNING,i.sound=!0,i.motionSync=!0,i.motionFadingDuration=500,i.idleMotionFadingDuration=2e3,i.expressionFadingDuration=500,i.preserveExpressionOnMotion=!0,i.cubism4=C})(M||(M={}));const je="0.4.0",h={log(i,...e){M.logLevel<=M.LOG_LEVEL_VERBOSE&&console.log(`[${i}]`,...e)},warn(i,...e){M.logLevel<=M.LOG_LEVEL_WARNING&&console.warn(`[${i}]`,...e)},error(i,...e){M.logLevel<=M.LOG_LEVEL_ERROR&&console.error(`[${i}]`,...e)}};function O(i,e,t){return i<e?e:i>t?t:i}function de(i,e){return Math.random()*(e-i)+i}function b(i,e,t,s,r){const o=e[s];o!==null&&typeof o===i&&(t[r]=o)}function _(i,e,t,s,r){const o=e[s];Array.isArray(o)&&(t[r]=o.filter(n=>n!==null&&typeof n===i))}function he(i,e){e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(s=>{s!=="constructor"&&Object.defineProperty(i.prototype,s,Object.getOwnPropertyDescriptor(t.prototype,s))})})}function ue(i){let e=i.lastIndexOf("/");return e!=-1&&(i=i.slice(0,e)),e=i.lastIndexOf("/"),e!==-1&&(i=i.slice(e+1)),i}function ce(i,e){const t=i.indexOf(e);t!==-1&&i.splice(t,1)}class Z extends U{constructor(e,t){super(),this.expressions=[],this.reserveExpressionIndex=-1,this.destroyed=!1,this.settings=e,this.tag=`ExpressionManager(${e.name})`}init(){this.defaultExpression=this.createExpression({},void 0),this.currentExpression=this.defaultExpression,this.stopAllExpressions()}loadExpression(e){return u(this,null,function*(){if(!this.definitions[e]){h.warn(this.tag,`Undefined expression at [${e}]`);return}if(this.expressions[e]===null){h.warn(this.tag,`Cannot set expression at [${e}] because it's already failed in loading.`);return}if(this.expressions[e])return this.expressions[e];const t=yield this._loadExpression(e);return this.expressions[e]=t,t})}_loadExpression(e){throw new Error("Not implemented.")}setRandomExpression(){return u(this,null,function*(){if(this.definitions.length){const e=[];for(let t=0;t<this.definitions.length;t++)this.expressions[t]!==null&&this.expressions[t]!==this.currentExpression&&t!==this.reserveExpressionIndex&&e.push(t);if(e.length){const t=Math.floor(Math.random()*e.length);return this.setExpression(t)}}return!1})}resetExpression(){this._setExpression(this.defaultExpression)}restoreExpression(){this._setExpression(this.currentExpression)}setExpression(e){return u(this,null,function*(){if(typeof e!="number"&&(e=this.getExpressionIndex(e)),!(e>-1&&e<this.definitions.length)||e===this.expressions.indexOf(this.currentExpression))return!1;this.reserveExpressionIndex=e;const t=yield this.loadExpression(e);return!t||this.reserveExpressionIndex!==e?!1:(this.reserveExpressionIndex=-1,this.currentExpression=t,this._setExpression(t),!0)})}update(e,t){return this.isFinished()?!1:this.updateParameters(e,t)}destroy(){this.destroyed=!0,this.emit("destroy");const e=this;e.definitions=void 0,e.expressions=void 0}}const V=.01,pe=40/7.5,ge=1/(.15*1e3);class me{constructor(){this.targetX=0,this.targetY=0,this.x=0,this.y=0,this.vx=0,this.vy=0}focus(e,t,s=!1){this.targetX=O(e,-1,1),this.targetY=O(t,-1,1),s&&(this.x=this.targetX,this.y=this.targetY)}update(e){const t=this.targetX-this.x,s=this.targetY-this.y;if(Math.abs(t)<V&&Math.abs(s)<V)return;const r=Math.sqrt(P(t,2)+P(s,2)),o=pe/(1e3/e);let n=o*(t/r)-this.vx,l=o*(s/r)-this.vy;const a=Math.sqrt(P(n,2)+P(l,2)),d=o*ge*e;a>d&&(n*=d/a,l*=d/a),this.vx+=n,this.vy+=l;const p=Math.sqrt(P(this.vx,2)+P(this.vy,2)),g=.5*(Math.sqrt(P(d,2)+8*d*r)-d);p>g&&(this.vx*=g/p,this.vy*=g/p),this.x+=this.vx,this.y+=this.vy}}class k{constructor(e){this.json=e;let t=e.url;if(typeof t!="string")throw new TypeError("The `url` field in settings JSON must be defined as a string.");this.url=t,this.name=ue(this.url)}resolveURL(e){return G.resolve(this.url,e)}replaceFiles(e){this.moc=e(this.moc,"moc"),this.pose!==void 0&&(this.pose=e(this.pose,"pose")),this.physics!==void 0&&(this.physics=e(this.physics,"physics"));for(let t=0;t<this.textures.length;t++)this.textures[t]=e(this.textures[t],`textures[${t}]`)}getDefinedFiles(){const e=[];return this.replaceFiles(t=>(e.push(t),t)),e}validateFiles(e){const t=(s,r)=>{const o=this.resolveURL(s);if(!e.includes(o)){if(r)throw new Error(`File "${s}" is defined in settings, but doesn't exist in given files`);return!1}return!0};return[this.moc,...this.textures].forEach(s=>t(s,!0)),this.getDefinedFiles().filter(s=>t(s,!1))}}var S=(i=>(i[i.NONE=0]="NONE",i[i.IDLE=1]="IDLE",i[i.NORMAL=2]="NORMAL",i[i.FORCE=3]="FORCE",i))(S||{});class fe{constructor(){this.debug=!1,this.currentPriority=0,this.reservePriority=0}reserve(e,t,s){if(s<=0)return h.log(this.tag,"Cannot start a motion with MotionPriority.NONE."),!1;if(e===this.currentGroup&&t===this.currentIndex)return h.log(this.tag,"Motion is already playing.",this.dump(e,t)),!1;if(e===this.reservedGroup&&t===this.reservedIndex||e===this.reservedIdleGroup&&t===this.reservedIdleIndex)return h.log(this.tag,"Motion is already reserved.",this.dump(e,t)),!1;if(s===1){if(this.currentPriority!==0)return h.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(e,t)),!1;if(this.reservedIdleGroup!==void 0)return h.log(this.tag,"Cannot start idle motion because another idle motion has reserved.",this.dump(e,t)),!1;this.setReservedIdle(e,t)}else{if(s<3){if(s<=this.currentPriority)return h.log(this.tag,"Cannot start motion because another motion is playing as an equivalent or higher priority.",this.dump(e,t)),!1;if(s<=this.reservePriority)return h.log(this.tag,"Cannot start motion because another motion has reserved as an equivalent or higher priority.",this.dump(e,t)),!1}this.setReserved(e,t,s)}return!0}start(e,t,s,r){if(r===1){if(this.setReservedIdle(void 0,void 0),this.currentPriority!==0)return h.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(t,s)),!1}else{if(t!==this.reservedGroup||s!==this.reservedIndex)return h.log(this.tag,"Cannot start motion because another motion has taken the place.",this.dump(t,s)),!1;this.setReserved(void 0,void 0,0)}return e?(this.setCurrent(t,s,r),!0):!1}complete(){this.setCurrent(void 0,void 0,0)}setCurrent(e,t,s){this.currentPriority=s,this.currentGroup=e,this.currentIndex=t}setReserved(e,t,s){this.reservePriority=s,this.reservedGroup=e,this.reservedIndex=t}setReservedIdle(e,t){this.reservedIdleGroup=e,this.reservedIdleIndex=t}isActive(e,t){return e===this.currentGroup&&t===this.currentIndex||e===this.reservedGroup&&t===this.reservedIndex||e===this.reservedIdleGroup&&t===this.reservedIdleIndex}reset(){this.setCurrent(void 0,void 0,0),this.setReserved(void 0,void 0,0),this.setReservedIdle(void 0,void 0)}shouldRequestIdleMotion(){return this.currentGroup===void 0&&this.reservedIdleGroup===void 0}shouldOverrideExpression(){return!M.preserveExpressionOnMotion&&this.currentPriority>1}dump(e,t){if(this.debug){const s=["currentPriority","reservePriority","currentGroup","currentIndex","reservedGroup","reservedIndex","reservedIdleGroup","reservedIdleIndex"];return`
<Requested> group = "${e}", index = ${t}
`+s.map(r=>"["+r+"] "+this[r]).join(`
`)}return""}}const Me="SoundManager",ye=.5;class L{static get volume(){return this._volume}static set volume(e){this._volume=(e>1?1:e<0?0:e)||0,this.audios.forEach(t=>t.volume=this._volume)}static add(e,t,s){const r=new Audio(e);return r.volume=this._volume,r.preload="auto",r.addEventListener("ended",()=>{this.dispose(r),t==null||t()}),r.addEventListener("error",o=>{this.dispose(r),h.warn(Me,`Error occurred on "${e}"`,o.error),s==null||s(o.error)}),this.audios.push(r),r}static play(e){return new Promise((t,s)=>{var r;(r=e.play())==null||r.catch(o=>{e.dispatchEvent(new ErrorEvent("error",{error:o})),s(o)}),e.readyState===e.HAVE_ENOUGH_DATA?t():e.addEventListener("canplaythrough",t)})}static dispose(e){e.pause(),e.removeAttribute("src"),ce(this.audios,e)}static destroy(){for(let e=this.audios.length-1;e>=0;e--)this.dispose(this.audios[e])}}L.audios=[];L._volume=ye;var xe=(i=>(i.ALL="ALL",i.IDLE="IDLE",i.NONE="NONE",i))(xe||{});class N extends U{constructor(e,t){super(),this.motionGroups={},this.state=new fe,this.playing=!1,this.destroyed=!1,this.settings=e,this.tag=`MotionManager(${e.name})`,this.state.tag=this.tag}init(e){e!=null&&e.idleMotionGroup&&(this.groups.idle=e.idleMotionGroup),this.setupMotions(e),this.stopAllMotions()}setupMotions(e){for(const s of Object.keys(this.definitions))this.motionGroups[s]=[];let t;switch(e==null?void 0:e.motionPreload){case"NONE":return;case"ALL":t=Object.keys(this.definitions);break;case"IDLE":default:t=[this.groups.idle];break}for(const s of t)if(this.definitions[s])for(let r=0;r<this.definitions[s].length;r++)this.loadMotion(s,r).then()}loadMotion(e,t){return u(this,null,function*(){var s;if(!((s=this.definitions[e])!=null&&s[t])){h.warn(this.tag,`Undefined motion at "${e}"[${t}]`);return}if(this.motionGroups[e][t]===null){h.warn(this.tag,`Cannot start motion at "${e}"[${t}] because it's already failed in loading.`);return}if(this.motionGroups[e][t])return this.motionGroups[e][t];const r=yield this._loadMotion(e,t);if(!this.destroyed)return this.motionGroups[e][t]=r??null,r})}_loadMotion(e,t){throw new Error("Not implemented.")}startMotion(e,t){return u(this,arguments,function*(s,r,o=S.NORMAL){var n;if(!this.state.reserve(s,r,o))return!1;const l=(n=this.definitions[s])==null?void 0:n[r];if(!l)return!1;this.currentAudio&&L.dispose(this.currentAudio);let a;if(M.sound){const p=this.getSoundFile(l);if(p)try{a=L.add(this.settings.resolveURL(p),()=>this.currentAudio=void 0,()=>this.currentAudio=void 0),this.currentAudio=a}catch(g){h.warn(this.tag,"Failed to create audio",p,g)}}const d=yield this.loadMotion(s,r);if(a){const p=L.play(a).catch(g=>h.warn(this.tag,"Failed to play audio",a.src,g));M.motionSync&&(yield p)}return this.state.start(d,s,r,o)?(h.log(this.tag,"Start motion:",this.getMotionName(l)),this.emit("motionStart",s,r,a),this.state.shouldOverrideExpression()&&this.expressionManager&&this.expressionManager.resetExpression(),this.playing=!0,this._startMotion(d),!0):(a&&(L.dispose(a),this.currentAudio=void 0),!1)})}startRandomMotion(e,t){return u(this,null,function*(){const s=this.definitions[e];if(s!=null&&s.length){const r=[];for(let o=0;o<s.length;o++)this.motionGroups[e][o]!==null&&!this.state.isActive(e,o)&&r.push(o);if(r.length){const o=Math.floor(Math.random()*r.length);return this.startMotion(e,r[o],t)}}return!1})}stopAllMotions(){this._stopAllMotions(),this.state.reset(),this.currentAudio&&(L.dispose(this.currentAudio),this.currentAudio=void 0)}update(e,t){var s;return this.isFinished()&&(this.playing&&(this.playing=!1,this.emit("motionFinish")),this.state.shouldOverrideExpression()&&((s=this.expressionManager)==null||s.restoreExpression()),this.state.complete(),this.state.shouldRequestIdleMotion()&&this.startRandomMotion(this.groups.idle,S.IDLE)),this.updateParameters(e,t)}destroy(){var e;this.destroyed=!0,this.emit("destroy"),this.stopAllMotions(),(e=this.expressionManager)==null||e.destroy();const t=this;t.definitions=void 0,t.motionGroups=void 0}}const ve={x:0,y:0,width:0,height:0};class we extends U{constructor(){super(...arguments),this.focusController=new me,this.originalWidth=0,this.originalHeight=0,this.width=0,this.height=0,this.localTransform=new D,this.drawingMatrix=new D,this.hitAreas={},this.textureFlipY=!1,this.viewport=[0,0,0,0],this.destroyed=!1}init(){this.setupLayout(),this.setupHitAreas()}setupLayout(){const e=this,t=this.getSize();e.originalWidth=t[0],e.originalHeight=t[1];const s=Object.assign({width:$,height:W},this.getLayout());this.localTransform.scale(s.width/$,s.height/W),e.width=this.originalWidth*this.localTransform.a,e.height=this.originalHeight*this.localTransform.d;const r=s.x!==void 0&&s.x-s.width/2||s.centerX!==void 0&&s.centerX||s.left!==void 0&&s.left-s.width/2||s.right!==void 0&&s.right+s.width/2||0,o=s.y!==void 0&&s.y-s.height/2||s.centerY!==void 0&&s.centerY||s.top!==void 0&&s.top-s.height/2||s.bottom!==void 0&&s.bottom+s.height/2||0;this.localTransform.translate(this.width*r,-this.height*o)}setupHitAreas(){const e=this.getHitAreaDefs().filter(t=>t.index>=0);for(const t of e)this.hitAreas[t.name]=t}hitTest(e,t){return Object.keys(this.hitAreas).filter(s=>this.isHit(s,e,t))}isHit(e,t,s){if(!this.hitAreas[e])return!1;const r=this.hitAreas[e].index,o=this.getDrawableBounds(r,ve);return o.x<=t&&t<=o.x+o.width&&o.y<=s&&s<=o.y+o.height}getDrawableBounds(e,t){const s=this.getDrawableVertices(e);let r=s[0],o=s[0],n=s[1],l=s[1];for(let a=0;a<s.length;a+=2){const d=s[a],p=s[a+1];r=Math.min(d,r),o=Math.max(d,o),n=Math.min(p,n),l=Math.max(p,l)}return t!=null||(t={}),t.x=r,t.y=n,t.width=o-r,t.height=l-n,t}updateTransform(e){this.drawingMatrix.copyFrom(e).append(this.localTransform)}update(e,t){this.focusController.update(e)}destroy(){this.destroyed=!0,this.emit("destroy"),this.motionManager.destroy(),this.motionManager=void 0}}const Ee="XHRLoader";class B extends Error{constructor(e,t,s,r=!1){super(e),this.url=t,this.status=s,this.aborted=r}}const f=class{static createXHR(i,e,t,s,r){const o=new XMLHttpRequest;if(f.allXhrSet.add(o),i){let n=f.xhrMap.get(i);n?n.add(o):(n=new Set([o]),f.xhrMap.set(i,n)),i.listeners("destroy").includes(f.cancelXHRs)||i.once("destroy",f.cancelXHRs)}return o.open("GET",e),o.responseType=t,o.onload=()=>{(o.status===200||o.status===0)&&o.response?s(o.response):o.onerror()},o.onerror=()=>{h.warn(Ee,`Failed to load resource as ${o.responseType} (Status ${o.status}): ${e}`),r(new B("Network error.",e,o.status))},o.onabort=()=>r(new B("Aborted.",e,o.status,!0)),o.onloadend=()=>{var n;f.allXhrSet.delete(o),i&&((n=f.xhrMap.get(i))==null||n.delete(o))},o}static cancelXHRs(){var i;(i=f.xhrMap.get(this))==null||i.forEach(e=>{e.abort(),f.allXhrSet.delete(e)}),f.xhrMap.delete(this)}static release(){f.allXhrSet.forEach(i=>i.abort()),f.allXhrSet.clear(),f.xhrMap=new WeakMap}};let R=f;R.xhrMap=new WeakMap;R.allXhrSet=new Set;R.loader=(i,e)=>new Promise((t,s)=>{f.createXHR(i.target,i.settings?i.settings.resolveURL(i.url):i.url,i.type,r=>{i.result=r,t()},s).send()});function Q(i,e){let t=-1;return s(0);function s(r,o){if(o)return Promise.reject(o);if(r<=t)return Promise.reject(new Error("next() called multiple times"));t=r;const n=i[r];if(!n)return Promise.resolve();try{return Promise.resolve(n(e,s.bind(null,r+1)))}catch(l){return Promise.reject(l)}}}class E{static load(e){return Q(this.middlewares,e).then(()=>e.result)}}E.middlewares=[R.loader];function Pe(i,e={}){const t={resourceOptions:{crossorigin:e.crossOrigin}};if(A.fromURL)return A.fromURL(i,t).catch(o=>{if(o instanceof Error)throw o;const n=new Error("Texture loading error");throw n.event=o,n});t.resourceOptions.autoLoad=!1;const s=A.from(i,t);if(s.baseTexture.valid)return Promise.resolve(s);const r=s.baseTexture.resource;return r._live2d_load!=null||(r._live2d_load=new Promise((o,n)=>{const l=a=>{r.source.removeEventListener("error",l);const d=new Error("Texture loading error");d.event=a,n(d)};r.source.addEventListener("error",l),r.load().then(()=>o(s)).catch(l)})),r._live2d_load}const Y="Live2DFactory",K=(i,e)=>u(void 0,null,function*(){if(typeof i.source=="string"){const t=yield E.load({url:i.source,type:"json",target:i.live2dModel});t.url=i.source,i.source=t,i.live2dModel.emit("settingsJSONLoaded",t)}return e()}),ee=(i,e)=>u(void 0,null,function*(){if(i.source instanceof k)return i.settings=i.source,e();if(typeof i.source=="object"){const t=c.findRuntime(i.source);if(t){const s=t.createModelSettings(i.source);return i.settings=s,i.live2dModel.emit("settingsLoaded",s),e()}}throw new TypeError("Unknown settings format.")}),te=(i,e)=>{if(i.settings){const t=c.findRuntime(i.settings);if(t)return t.ready().then(e)}return e()},se=(i,e)=>u(void 0,null,function*(){yield e();const t=i.internalModel;if(t){const s=i.settings,r=c.findRuntime(s);if(r){const o=[];s.pose&&o.push(E.load({settings:s,url:s.pose,type:"json",target:t}).then(n=>{t.pose=r.createPose(t.coreModel,n),i.live2dModel.emit("poseLoaded",t.pose)}).catch(n=>{i.live2dModel.emit("poseLoadError",n),h.warn(Y,"Failed to load pose.",n)})),s.physics&&o.push(E.load({settings:s,url:s.physics,type:"json",target:t}).then(n=>{t.physics=r.createPhysics(t.coreModel,n),i.live2dModel.emit("physicsLoaded",t.physics)}).catch(n=>{i.live2dModel.emit("physicsLoadError",n),h.warn(Y,"Failed to load physics.",n)})),o.length&&(yield Promise.all(o))}}}),ie=(i,e)=>u(void 0,null,function*(){if(i.settings){const t=i.live2dModel,s=i.settings.textures.map(r=>{const o=i.settings.resolveURL(r);return Pe(o,{crossOrigin:i.options.crossOrigin})});if(yield e(),i.internalModel)t.internalModel=i.internalModel,t.emit("modelLoaded",i.internalModel);else throw new TypeError("Missing internal model.");t.textures=yield Promise.all(s),t.emit("textureLoaded",t.textures)}else throw new TypeError("Missing settings.")}),re=(i,e)=>u(void 0,null,function*(){const t=i.settings;if(t instanceof k){const s=c.findRuntime(t);if(!s)throw new TypeError("Unknown model settings.");const r=yield E.load({settings:t,url:t.moc,type:"arraybuffer",target:i.live2dModel});if(!s.isValidMoc(r))throw new Error("Invalid moc data");const o=s.createCoreModel(r);return i.internalModel=s.createInternalModel(o,t,i.options),e()}throw new TypeError("Missing settings.")}),m=class{static registerRuntime(i){m.runtimes.push(i),m.runtimes.sort((e,t)=>t.version-e.version)}static findRuntime(i){for(const e of m.runtimes)if(e.test(i))return e}static setupLive2DModel(i,e,t){return u(this,null,function*(){const s=new Promise(n=>i.once("textureLoaded",n)),r=new Promise(n=>i.once("modelLoaded",n)),o=Promise.all([s,r]).then(()=>i.emit("ready"));yield Q(m.live2DModelMiddlewares,{live2dModel:i,source:e,options:t||{}}),yield o,i.emit("load")})}static loadMotion(i,e,t){var s,r;const o=n=>i.emit("motionLoadError",e,t,n);try{const n=(s=i.definitions[e])==null?void 0:s[t];if(!n)return Promise.resolve(void 0);i.listeners("destroy").includes(m.releaseTasks)||i.once("destroy",m.releaseTasks);let l=m.motionTasksMap.get(i);l||(l={},m.motionTasksMap.set(i,l));let a=l[e];a||(a=[],l[e]=a);const d=i.getMotionFile(n);return(r=a[t])!=null||(a[t]=E.load({url:d,settings:i.settings,type:i.motionDataType,target:i}).then(p=>{var g;const H=(g=m.motionTasksMap.get(i))==null?void 0:g[e];H&&delete H[t];const X=i.createMotion(p,e,n);return i.emit("motionLoaded",e,t,X),X}).catch(p=>{h.warn(i.tag,`Failed to load motion: ${d}
`,p),o(p)})),a[t]}catch(n){h.warn(i.tag,`Failed to load motion at "${e}"[${t}]
`,n),o(n)}return Promise.resolve(void 0)}static loadExpression(i,e){var t;const s=r=>i.emit("expressionLoadError",e,r);try{const r=i.definitions[e];if(!r)return Promise.resolve(void 0);i.listeners("destroy").includes(m.releaseTasks)||i.once("destroy",m.releaseTasks);let o=m.expressionTasksMap.get(i);o||(o=[],m.expressionTasksMap.set(i,o));const n=i.getExpressionFile(r);return(t=o[e])!=null||(o[e]=E.load({url:n,settings:i.settings,type:"json",target:i}).then(l=>{const a=m.expressionTasksMap.get(i);a&&delete a[e];const d=i.createExpression(l,r);return i.emit("expressionLoaded",e,d),d}).catch(l=>{h.warn(i.tag,`Failed to load expression: ${n}
`,l),s(l)})),o[e]}catch(r){h.warn(i.tag,`Failed to load expression at [${e}]
`,r),s(r)}return Promise.resolve(void 0)}static releaseTasks(){this instanceof N?m.motionTasksMap.delete(this):m.expressionTasksMap.delete(this)}};let c=m;c.runtimes=[];c.urlToJSON=K;c.jsonToSettings=ee;c.waitUntilReady=te;c.setupOptionals=se;c.setupEssentials=ie;c.createInternalModel=re;c.live2DModelMiddlewares=[K,ee,te,se,ie,re];c.motionTasksMap=new WeakMap;c.expressionTasksMap=new WeakMap;N.prototype._loadMotion=function(i,e){return c.loadMotion(this,i,e)};Z.prototype._loadExpression=function(i){return c.loadExpression(this,i)};class Ie{constructor(){this._autoInteract=!1}get autoInteract(){return this._autoInteract}set autoInteract(e){e!==this._autoInteract&&(e?this.on("pointertap",q,this):this.off("pointertap",q,this),this._autoInteract=e)}registerInteraction(e){e!==this.interactionManager&&(this.unregisterInteraction(),this._autoInteract&&e&&(this.interactionManager=e,e.on("pointermove",z,this)))}unregisterInteraction(){var e;this.interactionManager&&((e=this.interactionManager)==null||e.off("pointermove",z,this),this.interactionManager=void 0)}}function q(i){this.tap(i.data.global.x,i.data.global.y)}function z(i){this.focus(i.data.global.x,i.data.global.y)}class Le extends oe{}const x=new ne,be=new D;let w;class _e extends ae{constructor(e){super(),this.tag="Live2DModel(uninitialized)",this.textures=[],this.transform=new Le,this.anchor=new le(this.onAnchorChange,this,0,0),this.glContextID=-1,this.elapsedTime=performance.now(),this.deltaTime=0,this._autoUpdate=!1,this.once("modelLoaded",()=>this.init(e))}static from(e,t){const s=new this(t);return c.setupLive2DModel(s,e,t).then(()=>s)}static fromSync(e,t){const s=new this(t);return c.setupLive2DModel(s,e,t).then(t==null?void 0:t.onLoad).catch(t==null?void 0:t.onError),s}static registerTicker(e){w=e}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){var t;w||(w=(t=window.PIXI)==null?void 0:t.Ticker),e?this._destroyed||(w?(w.shared.add(this.onTickerUpdate,this),this._autoUpdate=!0):h.warn(this.tag,"No Ticker registered, please call Live2DModel.registerTicker(Ticker).")):(w==null||w.shared.remove(this.onTickerUpdate,this),this._autoUpdate=!1)}init(e){this.tag=`Live2DModel(${this.internalModel.settings.name})`;const t=Object.assign({autoUpdate:!0,autoInteract:!0},e);t.autoInteract&&(this.interactive=!0),this.autoInteract=t.autoInteract,this.autoUpdate=t.autoUpdate}onAnchorChange(){this.pivot.set(this.anchor.x*this.internalModel.width,this.anchor.y*this.internalModel.height)}motion(e,t,s){return t===void 0?this.internalModel.motionManager.startRandomMotion(e,s):this.internalModel.motionManager.startMotion(e,t,s)}expression(e){return this.internalModel.motionManager.expressionManager?e===void 0?this.internalModel.motionManager.expressionManager.setRandomExpression():this.internalModel.motionManager.expressionManager.setExpression(e):Promise.resolve(!1)}focus(e,t,s=!1){x.x=e,x.y=t,this.toModelPosition(x,x,!0);let r=x.x/this.internalModel.originalWidth*2-1,o=x.y/this.internalModel.originalHeight*2-1,n=Math.atan2(o,r);this.internalModel.focusController.focus(Math.cos(n),-Math.sin(n),s)}tap(e,t){const s=this.hitTest(e,t);s.length&&(h.log(this.tag,"Hit",s),this.emit("hit",s))}hitTest(e,t){return x.x=e,x.y=t,this.toModelPosition(x,x),this.internalModel.hitTest(x.x,x.y)}toModelPosition(e,t=e.clone(),s){return s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.transform.worldTransform.applyInverse(e,t),this.internalModel.localTransform.applyInverse(t,t),t}containsPoint(e){return this.getBounds(!0).contains(e.x,e.y)}_calculateBounds(){this._bounds.addFrame(this.transform,0,0,this.internalModel.width,this.internalModel.height)}onTickerUpdate(){this.update(w.shared.deltaMS)}update(e){this.deltaTime+=e,this.elapsedTime+=e}_render(e){this.registerInteraction(e.plugins.interaction),e.batch.reset(),e.geometry.reset(),e.shader.reset(),e.state.reset();let t=!1;this.glContextID!==e.CONTEXT_UID&&(this.glContextID=e.CONTEXT_UID,this.internalModel.updateWebGLContext(e.gl,this.glContextID),t=!0);for(let o=0;o<this.textures.length;o++){const n=this.textures[o];n.valid&&((t||!n.baseTexture._glTextures[this.glContextID])&&(e.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL,this.internalModel.textureFlipY),e.texture.bind(n.baseTexture,0)),this.internalModel.bindTexture(o,n.baseTexture._glTextures[this.glContextID].texture),n.baseTexture.touched=e.textureGC.count)}const s=e.framebuffer.viewport;this.internalModel.viewport=[s.x,s.y,s.width,s.height],this.deltaTime&&(this.internalModel.update(this.deltaTime,this.elapsedTime),this.deltaTime=0);const r=be.copyFrom(e.globalUniforms.uniforms.projectionMatrix).append(this.worldTransform);this.internalModel.updateTransform(r),this.internalModel.draw(e.gl),e.state.reset(),e.texture.reset()}destroy(e){this.emit("destroy"),this.autoUpdate=!1,this.unregisterInteraction(),e!=null&&e.texture&&this.textures.forEach(t=>t.destroy(e.baseTexture)),this.internalModel.destroy(),super.destroy(e)}}he(_e,[Ie]);const v=class{static resolveURL(i,e){var t;const s=(t=v.filesMap[i])==null?void 0:t[e];if(s===void 0)throw new Error("Cannot find this file from uploaded files: "+e);return s}static upload(i,e){return u(this,null,function*(){const t={};for(const s of e.getDefinedFiles()){const r=decodeURI(G.resolve(e.url,s)),o=i.find(n=>n.webkitRelativePath===r);o&&(t[s]=URL.createObjectURL(o))}v.filesMap[e._objectURL]=t})}static createSettings(i){return u(this,null,function*(){const e=i.find(n=>n.name.endsWith("model.json")||n.name.endsWith("model3.json"));if(!e)throw new TypeError("Settings file not found");const t=yield v.readText(e),s=JSON.parse(t);s.url=e.webkitRelativePath;const r=c.findRuntime(s);if(!r)throw new Error("Unknown settings JSON");const o=r.createModelSettings(s);return o._objectURL=URL.createObjectURL(e),o})}static readText(i){return u(this,null,function*(){return new Promise((e,t)=>{const s=new FileReader;s.onload=()=>e(s.result),s.onerror=t,s.readAsText(i,"utf8")})})}};let j=v;j.filesMap={};j.factory=(i,e)=>u(void 0,null,function*(){if(Array.isArray(i.source)&&i.source[0]instanceof File){const t=i.source;let s=t.settings;if(!s)s=yield v.createSettings(t);else if(!s._objectURL)throw new Error('"_objectURL" must be specified in ModelSettings');s.validateFiles(t.map(r=>encodeURI(r.webkitRelativePath))),yield v.upload(t,s),s.resolveURL=function(r){return v.resolveURL(this._objectURL,r)},i.source=s,i.live2dModel.once("modelLoaded",r=>{r.once("destroy",function(){const o=this.settings._objectURL;if(URL.revokeObjectURL(o),v.filesMap[o])for(const n of Object.values(v.filesMap[o]))URL.revokeObjectURL(n);delete v.filesMap[o]})})}return e()});c.live2DModelMiddlewares.unshift(j.factory);const y=class{static unzip(i,e){return u(this,null,function*(){const t=yield y.getFilePaths(i),s=[];for(const o of e.getDefinedFiles()){const n=decodeURI(G.resolve(e.url,o));t.includes(n)&&s.push(n)}const r=yield y.getFiles(i,s);for(let o=0;o<r.length;o++){const n=s[o],l=r[o];Object.defineProperty(l,"webkitRelativePath",{value:n})}return r})}static createSettings(i){return u(this,null,function*(){const e=(yield y.getFilePaths(i)).find(o=>o.endsWith("model.json")||o.endsWith("model3.json"));if(!e)throw new Error("Settings file not found");const t=yield y.readText(i,e);if(!t)throw new Error("Empty settings file: "+e);const s=JSON.parse(t);s.url=e;const r=c.findRuntime(s);if(!r)throw new Error("Unknown settings JSON");return r.createModelSettings(s)})}static zipReader(i,e){return u(this,null,function*(){throw new Error("Not implemented")})}static getFilePaths(i){return u(this,null,function*(){throw new Error("Not implemented")})}static getFiles(i,e){return u(this,null,function*(){throw new Error("Not implemented")})}static readText(i,e){return u(this,null,function*(){throw new Error("Not implemented")})}static releaseReader(i){}};let F=y;F.ZIP_PROTOCOL="zip://";F.uid=0;F.factory=(i,e)=>u(void 0,null,function*(){const t=i.source;let s,r,o;if(typeof t=="string"&&(t.endsWith(".zip")||t.startsWith(y.ZIP_PROTOCOL))?(t.startsWith(y.ZIP_PROTOCOL)?s=t.slice(y.ZIP_PROTOCOL.length):s=t,r=yield E.load({url:s,type:"blob",target:i.live2dModel})):Array.isArray(t)&&t.length===1&&t[0]instanceof File&&t[0].name.endsWith(".zip")&&(r=t[0],s=URL.createObjectURL(r),o=t.settings),r){if(!r.size)throw new Error("Empty zip file");const n=yield y.zipReader(r,s);o||(o=yield y.createSettings(n)),o._objectURL=y.ZIP_PROTOCOL+y.uid+"/"+o.url;const l=yield y.unzip(n,o);l.settings=o,i.source=l,s.startsWith("blob:")&&i.live2dModel.once("modelLoaded",a=>{a.once("destroy",function(){URL.revokeObjectURL(s)})}),y.releaseReader(n)}return e()});c.live2DModelMiddlewares.unshift(F.factory);if(!window.Live2D)throw new Error("Could not find Cubism 2 runtime. This plugin requires live2d.min.js to be loaded.");const Te=Live2DMotion.prototype.updateParam;Live2DMotion.prototype.updateParam=function(i,e){Te.call(this,i,e),e.isFinished()&&this.onFinishHandler&&(this.onFinishHandler(this),delete this.onFinishHandler)};class Oe extends AMotion{constructor(e){super(),this.params=[],this.setFadeIn(e.fade_in>0?e.fade_in:M.expressionFadingDuration),this.setFadeOut(e.fade_out>0?e.fade_out:M.expressionFadingDuration),Array.isArray(e.params)&&e.params.forEach(t=>{const s=t.calc||"add";if(s==="add"){const r=t.def||0;t.val-=r}else if(s==="mult"){const r=t.def||1;t.val/=r}this.params.push({calc:s,val:t.val,id:t.id})})}updateParamExe(e,t,s,r){this.params.forEach(o=>{e.setParamFloat(o.id,o.val*s)})}}class Re extends Z{constructor(e,t){var s;super(e,t),this.queueManager=new MotionQueueManager,this.definitions=(s=this.settings.expressions)!=null?s:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(e){return this.definitions.findIndex(t=>t.name===e)}getExpressionFile(e){return e.file}createExpression(e,t){return new Oe(e)}_setExpression(e){return this.queueManager.startMotion(e)}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(e,t){return this.queueManager.updateParam(e)}}class Fe extends N{constructor(e,t){super(e,t),this.groups={idle:"idle"},this.motionDataType="arraybuffer",this.queueManager=new MotionQueueManager,this.definitions=this.settings.motions,this.init(t)}init(e){super.init(e),this.settings.expressions&&(this.expressionManager=new Re(this.settings,e))}isFinished(){return this.queueManager.isFinished()}createMotion(e,t,s){const r=Live2DMotion.loadMotion(e),o=t===this.groups.idle?M.idleMotionFadingDuration:M.motionFadingDuration;return r.setFadeIn(s.fade_in>0?s.fade_in:o),r.setFadeOut(s.fade_out>0?s.fade_out:o),r}getMotionFile(e){return e.file}getMotionName(e){return e.file}getSoundFile(e){return e.sound}_startMotion(e,t){return e.onFinishHandler=t,this.queueManager.stopAllMotions(),this.queueManager.startMotion(e)}_stopAllMotions(){this.queueManager.stopAllMotions()}updateParameters(e,t){return this.queueManager.updateParam(e)}destroy(){super.destroy(),this.queueManager=void 0}}class Ae{constructor(e){this.coreModel=e,this.blinkInterval=4e3,this.closingDuration=100,this.closedDuration=50,this.openingDuration=150,this.eyeState=0,this.eyeParamValue=1,this.closedTimer=0,this.nextBlinkTimeLeft=this.blinkInterval,this.leftParam=e.getParamIndex("PARAM_EYE_L_OPEN"),this.rightParam=e.getParamIndex("PARAM_EYE_R_OPEN")}setEyeParams(e){this.eyeParamValue=O(e,0,1),this.coreModel.setParamFloat(this.leftParam,this.eyeParamValue),this.coreModel.setParamFloat(this.rightParam,this.eyeParamValue)}update(e){switch(this.eyeState){case 0:this.nextBlinkTimeLeft-=e,this.nextBlinkTimeLeft<0&&(this.eyeState=1,this.nextBlinkTimeLeft=this.blinkInterval+this.closingDuration+this.closedDuration+this.openingDuration+de(0,2e3));break;case 1:this.setEyeParams(this.eyeParamValue+e/this.closingDuration),this.eyeParamValue<=0&&(this.eyeState=2,this.closedTimer=0);break;case 2:this.closedTimer+=e,this.closedTimer>=this.closedDuration&&(this.eyeState=3);break;case 3:this.setEyeParams(this.eyeParamValue+e/this.openingDuration),this.eyeParamValue>=1&&(this.eyeState=0)}}}const I=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class De extends we{constructor(e,t,s){super(),this.textureFlipY=!0,this.drawDataCount=0,this.disableCulling=!1,this.coreModel=e,this.settings=t,this.motionManager=new Fe(t,s),this.eyeBlink=new Ae(e),this.eyeballXParamIndex=e.getParamIndex("PARAM_EYE_BALL_X"),this.eyeballYParamIndex=e.getParamIndex("PARAM_EYE_BALL_Y"),this.angleXParamIndex=e.getParamIndex("PARAM_ANGLE_X"),this.angleYParamIndex=e.getParamIndex("PARAM_ANGLE_Y"),this.angleZParamIndex=e.getParamIndex("PARAM_ANGLE_Z"),this.bodyAngleXParamIndex=e.getParamIndex("PARAM_BODY_ANGLE_X"),this.breathParamIndex=e.getParamIndex("PARAM_BREATH"),this.init()}init(){super.init(),this.settings.initParams&&this.settings.initParams.forEach(({id:o,value:n})=>this.coreModel.setParamFloat(o,n)),this.settings.initOpacities&&this.settings.initOpacities.forEach(({id:o,value:n})=>this.coreModel.setPartsOpacity(o,n)),this.coreModel.saveParam();const e=this.coreModel.getModelContext()._$aS;e!=null&&e.length&&(this.drawDataCount=e.length);let t=this.coreModel.drawParamWebGL.culling;Object.defineProperty(this.coreModel.drawParamWebGL,"culling",{set:o=>t=o,get:()=>this.disableCulling?!1:t});const s=this.coreModel.getModelContext().clipManager,r=s.setupClip;s.setupClip=(o,n)=>{r.call(s,o,n),n.gl.viewport(...this.viewport)}}getSize(){return[this.coreModel.getCanvasWidth(),this.coreModel.getCanvasHeight()]}getLayout(){const e={};if(this.settings.layout)for(const t of Object.keys(this.settings.layout)){let s=t;t==="center_x"?s="centerX":t==="center_y"&&(s="centerY"),e[s]=this.settings.layout[t]}return e}updateWebGLContext(e,t){const s=this.coreModel.drawParamWebGL;s.firstDraw=!0,s.setGL(e),s.glno=t;for(const n in s)s.hasOwnProperty(n)&&s[n]instanceof WebGLBuffer&&(s[n]=null);const r=this.coreModel.getModelContext().clipManager;r.curFrameNo=t;const o=e.getParameter(e.FRAMEBUFFER_BINDING);r.getMaskRenderTexture(),e.bindFramebuffer(e.FRAMEBUFFER,o)}bindTexture(e,t){this.coreModel.setTexture(e,t)}getHitAreaDefs(){var e;return((e=this.settings.hitAreas)==null?void 0:e.map(t=>({id:t.id,name:t.name,index:this.coreModel.getDrawDataIndex(t.id)})))||[]}getDrawableIDs(){const e=this.coreModel.getModelContext(),t=[];for(let s=0;s<this.drawDataCount;s++){const r=e.getDrawData(s);r&&t.push(r.getDrawDataID().id)}return t}getDrawableIndex(e){return this.coreModel.getDrawDataIndex(e)}getDrawableVertices(e){if(typeof e=="string"&&(e=this.coreModel.getDrawDataIndex(e),e===-1))throw new TypeError("Unable to find drawable ID: "+e);return this.coreModel.getTransformedPoints(e).slice()}update(e,t){var s,r,o,n;super.update(e,t);const l=this.coreModel;this.emit("beforeMotionUpdate");const a=this.motionManager.update(this.coreModel,t);this.emit("afterMotionUpdate"),l.saveParam(),(s=this.motionManager.expressionManager)==null||s.update(l,t),a||(r=this.eyeBlink)==null||r.update(e),this.updateFocus(),this.updateNaturalMovements(e,t),(o=this.physics)==null||o.update(t),(n=this.pose)==null||n.update(e),this.emit("beforeModelUpdate"),l.update(),l.loadParam()}updateFocus(){this.coreModel.addToParamFloat(this.eyeballXParamIndex,this.focusController.x),this.coreModel.addToParamFloat(this.eyeballYParamIndex,this.focusController.y),this.coreModel.addToParamFloat(this.angleXParamIndex,this.focusController.x*30),this.coreModel.addToParamFloat(this.angleYParamIndex,this.focusController.y*30),this.coreModel.addToParamFloat(this.angleZParamIndex,this.focusController.x*this.focusController.y*-30),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,this.focusController.x*10)}updateNaturalMovements(e,t){const s=t/1e3*2*Math.PI;this.coreModel.addToParamFloat(this.angleXParamIndex,15*Math.sin(s/6.5345)*.5),this.coreModel.addToParamFloat(this.angleYParamIndex,8*Math.sin(s/3.5345)*.5),this.coreModel.addToParamFloat(this.angleZParamIndex,10*Math.sin(s/5.5345)*.5),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,4*Math.sin(s/15.5345)*.5),this.coreModel.setParamFloat(this.breathParamIndex,.5+.5*Math.sin(s/3.2345))}draw(e){const t=this.disableCulling;e.getParameter(e.FRAMEBUFFER_BINDING)&&(this.disableCulling=!0);const s=this.drawingMatrix;I[0]=s.a,I[1]=s.b,I[4]=s.c,I[5]=s.d,I[12]=s.tx,I[13]=s.ty,this.coreModel.setMatrix(I),this.coreModel.draw(),this.disableCulling=t}destroy(){super.destroy(),this.coreModel=void 0}}class T extends k{constructor(e){if(super(e),this.motions={},!T.isValidJSON(e))throw new TypeError("Invalid JSON.");this.moc=e.model,_("string",e,this,"textures","textures"),this.copy(e)}static isValidJSON(e){var t;return!!e&&typeof e.model=="string"&&((t=e.textures)==null?void 0:t.length)>0&&e.textures.every(s=>typeof s=="string")}copy(e){b("string",e,this,"name","name"),b("string",e,this,"pose","pose"),b("string",e,this,"physics","physics"),b("object",e,this,"layout","layout"),b("object",e,this,"motions","motions"),_("object",e,this,"hit_areas","hitAreas"),_("object",e,this,"expressions","expressions"),_("object",e,this,"init_params","initParams"),_("object",e,this,"init_opacities","initOpacities")}replaceFiles(e){super.replaceFiles(e);for(const[t,s]of Object.entries(this.motions))for(let r=0;r<s.length;r++)s[r].file=e(s[r].file,`motions.${t}[${r}].file`),s[r].sound!==void 0&&(s[r].sound=e(s[r].sound,`motions.${t}[${r}].sound`));if(this.expressions)for(let t=0;t<this.expressions.length;t++)this.expressions[t].file=e(this.expressions[t].file,`expressions[${t}].file`)}}const Ce={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE},Se={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE};class Ue{constructor(e,t){this.coreModel=e,this.physicsHairs=[],t.physics_hair&&(this.physicsHairs=t.physics_hair.map(s=>{const r=new PhysicsHair;return r.setup(s.setup.length,s.setup.regist,s.setup.mass),s.src.forEach(({id:o,ptype:n,scale:l,weight:a})=>{const d=Ce[n];d&&r.addSrcParam(d,o,l,a)}),s.targets.forEach(({id:o,ptype:n,scale:l,weight:a})=>{const d=Se[n];d&&r.addTargetParam(d,o,l,a)}),r}))}update(e){this.physicsHairs.forEach(t=>t.update(this.coreModel,e))}}class J{constructor(e){this.id=e,this.paramIndex=-1,this.partsIndex=-1,this.link=[]}initIndex(e){this.paramIndex=e.getParamIndex("VISIBLE:"+this.id),this.partsIndex=e.getPartsDataIndex(PartsDataID.getID(this.id)),e.setParamFloat(this.paramIndex,1)}}class Ge{constructor(e,t){this.coreModel=e,this.opacityAnimDuration=500,this.partsGroups=[],t.parts_visible&&(this.partsGroups=t.parts_visible.map(({group:s})=>s.map(({id:r,link:o})=>{const n=new J(r);return o&&(n.link=o.map(l=>new J(l))),n})),this.init())}init(){this.partsGroups.forEach(e=>{e.forEach(t=>{if(t.initIndex(this.coreModel),t.paramIndex>=0){const s=this.coreModel.getParamFloat(t.paramIndex)!==0;this.coreModel.setPartsOpacity(t.partsIndex,s?1:0),this.coreModel.setParamFloat(t.paramIndex,s?1:0),t.link.length>0&&t.link.forEach(r=>r.initIndex(this.coreModel))}})})}normalizePartsOpacityGroup(e,t){const s=this.coreModel,r=.5,o=.15;let n=1,l=e.findIndex(({paramIndex:a,partsIndex:d})=>d>=0&&s.getParamFloat(a)!==0);if(l>=0){const a=s.getPartsOpacity(e[l].partsIndex);n=O(a+t/this.opacityAnimDuration,0,1)}else l=0,n=1;e.forEach(({partsIndex:a},d)=>{if(a>=0)if(l==d)s.setPartsOpacity(a,n);else{let p=s.getPartsOpacity(a),g;n<r?g=n*(r-1)/r+1:g=(1-n)*r/(1-r),(1-g)*(1-n)>o&&(g=1-o/(1-n)),p>g&&(p=g),s.setPartsOpacity(a,p)}})}copyOpacity(e){const t=this.coreModel;e.forEach(({partsIndex:s,link:r})=>{if(s>=0&&r){const o=t.getPartsOpacity(s);r.forEach(({partsIndex:n})=>{n>=0&&t.setPartsOpacity(n,o)})}})}update(e){this.partsGroups.forEach(t=>{this.normalizePartsOpacityGroup(t,e),this.copyOpacity(t)})}}c.registerRuntime({version:2,test(i){return i instanceof T||T.isValidJSON(i)},ready(){return Promise.resolve()},isValidMoc(i){if(i.byteLength<3)return!1;const e=new Int8Array(i,0,3);return String.fromCharCode(...e)==="moc"},createModelSettings(i){return new T(i)},createCoreModel(i){const e=Live2DModelWebGL.loadModel(i),t=Live2D.getError();if(t)throw t;return e},createInternalModel(i,e,t){return new De(i,e,t)},createPose(i,e){return new Ge(i,e)},createPhysics(i,e){return new Ue(i,e)}});export{Re as Cubism2ExpressionManager,De as Cubism2InternalModel,T as Cubism2ModelSettings,Fe as Cubism2MotionManager,Z as ExpressionManager,j as FileLoader,me as FocusController,Ie as InteractionMixin,we as InternalModel,W as LOGICAL_HEIGHT,$ as LOGICAL_WIDTH,Oe as Live2DExpression,Ae as Live2DEyeBlink,c as Live2DFactory,E as Live2DLoader,_e as Live2DModel,Ue as Live2DPhysics,Ge as Live2DPose,Le as Live2DTransform,k as ModelSettings,N as MotionManager,xe as MotionPreloadStrategy,S as MotionPriority,fe as MotionState,L as SoundManager,je as VERSION,R as XHRLoader,F as ZipLoader,he as applyMixins,O as clamp,M as config,_ as copyArray,b as copyProperty,ue as folderName,h as logger,de as rand,ce as remove};
